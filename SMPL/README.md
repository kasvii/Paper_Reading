# SMPL: A Skinned Multi-Person Linear Model

## 摘要

本文提出了一个使用shape和pose参数的线性人体模型，参数是从多个训练数据中学习来的。SMPL模型和Unity、Maya是相通的。

## 引入

我们的目标是创建一个可以表现不同人体形状、变形和运动的模型，同时希望这个模型能够快速渲染、易于部署、与现有渲染引擎兼容。

Linear Blend Skinning  (LBS) 模型受到广泛的应用，但是它构建出来的模型不够真实。

我们的目标是制作一个能够广泛使用的简单和标准的模型，同时保持真实性。我们方法的一个关键点在于，

我们将姿态混合型状表示为旋转矩阵的线性函数。

还将SMPL拓展到动态的情况，利用主成分分析PCA来减少维度，产生动态形状，然后基于速度和加速度来训练模型。

## 方法

跟SCAPE一样，SMPL模型吧人体形状分解成了identity-dependent形状和non-rigid pose-dependent 形状。不同的是，我们使用基于定点的蒙皮方法来矫正混合形状。一个简单的混合形状可以用一个连接顶点的偏移向量来表示。

一个人体mesh由N=6890个网格顶点和K=23的关节点组成：

- N = 6890， 人体mesh的网格顶点数
- K = 23，人体mesh的关节点总数

SMPL将人体mesh的状态分为shape和pose：

- shape控制人体mesh的形状 - 高矮胖瘦
- pose控制人体mesh的姿态 - 动作姿态

### 标准三维人体参数 

在三维空间中，一个点有三个自由度，因此一个标准三维人体mesh的6890个mesh顶点可以表示为：

- T，一个6890*3的矩阵，是常数值

标准三维人体mesh的23个关节点可以表示为：

- J，一个24*3的矩阵，23个关节点和1个根节点。这个矩阵也是常数值。

混合权重，每一个关节点坐标变化对每一个mesh顶点坐标变化的影响：

- W，一个6890*24的矩阵。需要训练得到。

### 影响参数

在标准人体mesh的基础上，还有两组影响参数shape和pose。

- shape：影响高矮胖瘦，β，10个（-1，1）的参数

- pose：影响动作姿态，θ，72个参数（23 * 3 + 3 = 72），23个关节点+1个根节点的旋转。前三个控制根节点，后面每三个（值在-1~1）控制一个关节点。

这10+72=82个参数，就是在标准三维人体mesh的基础上，生成不同形状和姿势的人体所需要的参数。

![3](./SMPL/3.png)

图a是标准三维人体mesh，由T、J、W生成，颜色代表W。

图b是改变shape后的三维人体mesh

图c是改变shape和pose后的三维人体mesh

图d是在图c的基础上，加入了W的影响后的结果

## 训练

- 位姿参数P：207 * 3 * 6890 = 4278690 （207 = 23*9,23是关节点个数，9是旋转矩阵的元素个数）
- 权重：4 * 3 * 6890 = 82680，为了和现有渲染软件兼容，所以假定一个顶点至多被四个关节点影响
- 回归矩阵J，用顶点位置的得到关节点位置：3 * 6890 * 23 * 3 = 1426230

![4](./SMPL/4.PNG)

## 关键词

linear blend skinning （LBS）

Dual-Quaternion blend skinning （DQBS）

BlendSCAPE

generic black box - 通用黑盒

kinematic tree - 运动学树

## 参考

- [SMPL模型及源码解读](https://blog.csdn.net/weixin_42145554/article/details/112251942)

